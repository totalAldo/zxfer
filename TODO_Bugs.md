# TODO – Logical Bugs

- [ ] `src/zxfer_get_zfs_list.sh:43-45` performs `[ "$g_option_j_jobs" -le 1 ]` before validating that the `-j` argument is numeric. Passing a non-integer such as `-j foo` causes `/bin/sh` to emit “integer expression expected” and zxfer dies before emitting a helpful usage error. Validate the CLI input (e.g., via a pattern check) before touching it in arithmetic contexts so invalid values can be rejected cleanly.
- [ ] Destination paths with a trailing slash are never normalized, so `set_actual_dest()` (`src/zxfer_zfs_mode.sh:51-72`) concatenates `$g_destination` and the child dataset with an extra `/`. Invocations such as `zxfer -N tank/src backup/dst/` therefore generate targets like `backup/dst//src`, which `zfs` rejects as invalid dataset names. The source path is stripped of trailing slashes in `run_zfs_mode()` (`src/zxfer_zfs_mode.sh:316-325`); the destination should be normalized the same way before replication starts.
